{"mappings":"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","sources":["src/JS/renderModalMarkup.js"],"sourcesContent":["const refs = {\n  addTo: document.querySelector('.modal_txt'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  backdrop: document.querySelector('.js-backdrop'),\n  watchedBtn: document.querySelector('.watched-btn'),\n  list: document.querySelector('.js-cards'),\n  quequeBtn: document.querySelector('.quequeBtn'),\n};\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\nrefs.watchedBtn.addEventListener('click', addToLocalStorage);\nrefs.list.addEventListener('click', movieClick);\nrefs.quequeBtn.addEventListener('click', addToQueQueStorage);\n\nfunction movieClick(evt) {\n  evt.preventDefault();\n\n  const selectedFilm = evt.target.closest('.js-card');\n  const filmId = selectedFilm.dataset.id;\n\n  if (selectedFilm) {\n    onOpenModal();\n    fetchOneMovie(filmId).then(data => {\n      createMarkupCard(data);\n    });\n  }\n}\n\nfunction fetchOneMovie(filmId) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${filmId}?api_key=671c14eb1babf71c7ecd9b35ab5716a8`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction onOpenModal() {\n  document.addEventListener('keydown', onEscapeClick);\n  document.body.classList.add('show-modal');\n  // createMarkupCard();\n  // document.body.style.position = 'fixed';\n  document.body.style.top = `-${window.scrollY}px`;\n}\n\nfunction onCloseModal() {\n  document.removeEventListener('keydown', onEscapeClick);\n  document.body.classList.remove('show-modal');\n  const scrollY = document.body.style.top;\n  document.body.style.position = '';\n  document.body.style.top = '';\n  window.scrollTo(0, parseInt(scrollY || '0') * -1);\n}\n\nfunction onBackdropClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscapeClick(evt) {\n  if (evt.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction createMarkupCard(data) {\n  const arr = [];\n  arr.push(data);\n  const markup = arr\n    .map(\n      ({\n        title,\n        vote_average,\n        vote_count,\n        popularity,\n        original_title,\n        genres,\n        overview,\n        poster_path,\n        id,\n      }) => {\n        const genreList = genres.map(genre => genre.name);\n\n        return `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" data-id=\"${id}\" alt=\"phonesize_image_movie\" class=\"image_movie_card\">\n\n                <div class=\"movie_card_info\">\n                    <h1 class=\"movie_title_card_modal\">${title}</h1>\n                    <div class=\"rates_info_card_movie\">\n\n        <div class=\"rates_info_card_movie_titles\">\n            <p class=\"rates_info_card_movie_titles_name\">Vote / Votes</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Popularity</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Original Title</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Genre</p> \n\n        </div>\n                    \n<div class=\"rates_info_card_movie_datas\">\n    <p class=\"votes_number_card\"> <span class=\"span_votes_number_card\">${String(\n      vote_average\n    ).slice(0, 3)}</span>/${vote_count}</p>\n                    <p class=\"votes_number_card\">${Math.ceil(popularity)}</p>\n                    <p class=\"votes_number_card\">${original_title}</p>\n                    <p class=\"votes_number_card\">${genreList.slice(0, 3).join(\", \")}</p>\n</div>\n                    \n\n                    </div>\n                  \n                    <h2 class=\"about-film-card-info\">About</h2>\n\n                 <p class=\"description-movie-card\"> ${overview}</p>  \n\n                </div>`;\n      }\n    )\n    .join('');\n  refs.addTo.innerHTML = markup;\n  refs.watchedBtn.textContent = 'Add to watched'.toUpperCase();\n}\n\nconst arrayOfWatchedMovies = [];\nconst arrayOfQueQue = [];\n\nfunction addToLocalStorage() {\n  const imageEl = document.querySelector('.image_movie_card');\n  const idFilmUnique = Number(imageEl.dataset.id);\n\n  if (arrayOfWatchedMovies.includes(idFilmUnique)) {\n    refs.watchedBtn.textContent = 'Add to watched'.toUpperCase();\n    const filmIndex = arrayOfWatchedMovies.indexOf(idFilmUnique);\n    const removeFilm = arrayOfWatchedMovies.splice(filmIndex, 1);\n\n    localStorage.removeItem('watchedMovies');\n\n    return;\n  }\n\n  refs.watchedBtn.textContent = 'remove'.toUpperCase();\n\n  arrayOfWatchedMovies.push(idFilmUnique);\n  localStorage.setItem('watchedMovies', JSON.stringify(arrayOfWatchedMovies));\n}\n\nfunction addToQueQueStorage() {\n  const imageEl = document.querySelector('.image_movie_card');\n  const idQueQue = Number(imageEl.dataset.id);\n\n  const watchedMovies = JSON.parse(localStorage.getItem('watchedMovies'));\n  // console.log(JSON.parse(watchedMovies));\n\n  if (arrayOfQueQue.includes(idQueQue)) {\n    return;\n  }\n\n  arrayOfQueQue.push(idQueQue);\n  localStorage.setItem('queQueMovies', JSON.stringify(arrayOfQueQue));\n}\n"],"names":["$109ef8a2a0c0d812$var$refs","addTo","document","querySelector","closeModalBtn","backdrop","watchedBtn","list","quequeBtn","$109ef8a2a0c0d812$var$onCloseModal","removeEventListener","$109ef8a2a0c0d812$var$onEscapeClick","body","classList","remove","scrollY","style","top","position","window","scrollTo","parseInt","evt","code","addEventListener","currentTarget","target","imageEl","idFilmUnique","Number","dataset","id","$109ef8a2a0c0d812$var$arrayOfWatchedMovies","includes","textContent","toUpperCase","filmIndex","indexOf","splice","localStorage","removeItem","push","setItem","JSON","stringify","preventDefault","selectedFilm","closest","filmId","add","concat","fetch","then","resp","ok","Error","statusText","json","$109ef8a2a0c0d812$var$fetchOneMovie","data","arr","markup","map","param","title","vote_average","vote_count","popularity","original_title","genres","overview","poster_path","genreList","genre","name","String","slice","Math","ceil","join","innerHTML","$109ef8a2a0c0d812$var$createMarkupCard","idQueQue","parse","getItem","$109ef8a2a0c0d812$var$arrayOfQueQue"],"version":3,"file":"index.785f0dda.js.map"}