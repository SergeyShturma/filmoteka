{"mappings":"sgBA2BA,MAAMA,EAAWC,SAASC,cAAc,4BAClCC,EAAOF,SAASC,cAAc,aAC9BE,EAAYH,SAASC,cAAc,mBA6BzC,SAASG,IACPD,EAAUE,UAAUC,IAAI,aAlBxBP,EAASM,UAAUC,IAAI,aACvBP,EAASQ,UAAY,GACrBP,SAASQ,KAAKC,MAAQ,sBAmBtBT,SAASU,oBAAoB,UAAWC,E,CAG1C,SAASA,EAAcC,GACJ,WAAbA,EAAIC,MACNT,G,CArCsBJ,SAASC,cAAc,4BAE/Ba,iBAAiB,QAASV,GAC5CF,EAAKY,iBAAiB,SApBtB,SAAoBF,GAClBA,EAAIG,iBAZN,SAAuBC,GACrB,OAAOC,MACL,sCAAsCD,8CACtCE,MAAKC,IACL,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,MAAM,G,CAYpBC,CALqBZ,EAAIa,OAAOC,QAAQ,YAEZC,QAAQC,IAGdV,MAAKW,KAyB7B,SAAmBA,IAyBnB,SAAqBA,GACnB,MAAMC,EAAM,GACZA,EAAIC,KAAKF,GACT,MAAMG,EAASF,EACZG,KACC,EAACC,MACCA,EAAKC,aACLA,EAAYC,WACZA,EAAUC,WACVA,EAAUC,eACVA,EAAcC,OACdA,EAAMC,SACNA,EAAQC,YACRA,MAEA,MAAMC,EAAYH,EAAON,KAAIU,GAASA,EAAMC,OAE5C,MAAO,6qCAoBsEH,WAAqBP,qHAG1DA,2bAUIC,EAAaU,QAAQ,+EACpBT,oEAEdU,KAAKC,KAAKV,gDACVC,+CACAI,EAAUM,OAAO,EAAG,GAAGC,KAAK,oIAIvBT,8ZAUjC,IAGNS,KAAK,IACR9C,EAAUI,UAAYyB,C,CAjGtBkB,CAAYrB,GACK7B,SAASC,cAAc,8BAC/Ba,iBAAiB,QAASV,GACnCD,EAAUE,UAAU8C,OAAO,aAd3BpD,EAASM,UAAU8C,OAAO,aAC1BnD,SAASQ,KAAKC,MAAQ,qBAgBtBT,SAASc,iBAAiB,UAAWH,GAgGvC,SAAoBkB,GAClB,MAAMuB,EACJC,KAAKC,MAAMC,aAAaC,QAAQ,oBAAsB,GAClDC,EAAcJ,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GAClEE,EAAa1D,SAASC,cAAc,gBACpC0D,EAAW3D,SAASC,cAAc,cAexC,SAAS2D,IACFR,EAAcS,SAAUhC,EAAKD,IAChCkC,SAASC,OAAOC,QACd,kDAKDZ,EAAcrB,KAAKF,EAAKD,IACzB2B,aAAaU,QAAQ,iBAAkBZ,KAAKa,UAAUd,IACtDU,SAASC,OAAOI,QACd,gC,CAgBN,SAASC,IACFX,EAAYI,SAAUhC,EAAKD,IAC9BkC,SAASC,OAAOC,QACd,kDAKDP,EAAY1B,KAAKF,EAAKD,IACvB2B,aAAaU,QAAQ,eAAgBZ,KAAKa,UAAUT,I,CAjDxDC,EAAW5C,iBAAiB,QAAS8C,GACrCD,EAAS7C,iBAAiB,QAASsD,E,CAtGnCC,CAAWxC,E,CAhCTyC,CAAUzC,EAAK,G","sources":["src/JS/renderModalMarkup.js"],"sourcesContent":["// import Notiflix from 'notiflix';\n// import { Notify } from 'notiflix/build/notiflix-notify-aio';\nfunction fetchOneMovie(filmId) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${filmId}?api_key=671c14eb1babf71c7ecd9b35ab5716a8`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction movieClick(evt) {\n  evt.preventDefault();\n\n  const selectedFilm = evt.target.closest('.js-card');\n  // console.log(selectedFilm);\n  const filmId = selectedFilm.dataset.id;\n  // console.log(filmId);\n\n  fetchOneMovie(filmId).then(data => {\n    // console.log(data);\n    showModal(data);\n  });\n}\n\nconst backdrop = document.querySelector('.js-movie-modal-backdrop');\nconst list = document.querySelector('.js-cards');\nconst filmModal = document.querySelector('.js-movie-modal');\nconst filmModalbackdrop = document.querySelector('.js-movie-modal-backdrop');\n\nfilmModalbackdrop.addEventListener('click', closeModal);\nlist.addEventListener('click', movieClick);\n\nfunction showBackdrop() {\n  backdrop.classList.remove('is-hidden');\n  document.body.style = `overflow-y: hidden`;\n}\n\nfunction closeBackdrop() {\n  backdrop.classList.add('is-hidden');\n  backdrop.innerHTML = '';\n  document.body.style = `overflow-y: visible`;\n}\n\nfunction showModal(data) {\n  renderModal(data);\n  const closeBtn = document.querySelector('.js-movie-modal__close-btn');\n  closeBtn.addEventListener('click', closeModal);\n  filmModal.classList.remove('is-hidden');\n\n  showBackdrop();\n  document.addEventListener('keydown', onEscKeyPress);\n\n  locStorage(data);\n}\n\nfunction closeModal() {\n  filmModal.classList.add('is-hidden');\n\n  closeBackdrop();\n  document.removeEventListener('keydown', onEscKeyPress);\n}\n\nfunction onEscKeyPress(evt) {\n  if (evt.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction renderModal(data) {\n  const arr = [];\n  arr.push(data);\n  const markup = arr\n    .map(\n      ({\n        title,\n        vote_average,\n        vote_count,\n        popularity,\n        original_title,\n        genres,\n        overview,\n        poster_path,\n      }) => {\n        const genreList = genres.map(genre => genre.name);\n\n        return `<div class=\"js-movie-modal__content\">\n        <button class = \"js-movie-modal__close-btn\">\n        <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M8 8L22 22\" stroke=\"black\" stroke-width=\"2\"/>\n            <path d=\"M8 22L22 8\" stroke=\"black\" stroke-width=\"2\"/>\n        </svg>              \n        </button>\n        <div class=\"js-movie-modal__poster\">\n        \n    <button class='btn-trailer' type='button' aria-label='play movie trailer'>\n      <svg class='btn-trailer__svg' width='68' height='48' viewBox='0 0 68 48'>\n        <path\n          class='btn-trailer__path'\n          d='M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z'\n          fill='#212121'\n        ></path>\n        <path d='M 45,24 27,14 27,34' fill='#fff'></path>\n      </svg>\n    </button>\n\n            <img class = \"js-movie-modal__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        </div>\n        <div class=\"movie-modal__info-about\">\n            <h1 class=\"js-movie-modal__title\">${title}</h1>\n    <div class=\"movie-modal__info\">\n        <div class=\"movie-modal__info-name\">\n            <p class=\"info-name\">Vote / Votes</p>\n            <p class=\"info-name\">Popularity</p>\n            <p class=\"info-name\">Original Title</p>\n            <p class=\"info-name\">Genre</p>\n        </div>\n        <div class=\"movie-modal__info-value\">\n            <p class=\"js-info-value\">\n                <span class=\"js-info-value__vote\">${vote_average.toFixed(1)}</span>&ensp;/&ensp; \n                <span class=\"js-info-value__votes\">${vote_count}</span>\n            </p>\n            <p class=\"js-info-value\">${Math.ceil(popularity)}</p>\n            <p class=\"js-info-value\">${original_title}</p>\n            <p class=\"js-info-value\">${genreList.splice(0, 3).join(', ')}</p>\n        </div>\n    </div>\n    <h2 class=\"movie-modal__about\">About </h2>\n    <p class=\"js-movie-modal__about-text\">${overview}</p>\n    <ul class = \"movie-modal__btn-list\">\n        <li class = \"movie-modal__btn-list-item\">\n            <button class=\"js-movie-modal__btn add-watched\" type=\"button\">add to Watched</button>\n        </li>\n        <li class = \"movie-modal__btn-list-item\">\n            <button class=\"js-movie-modal__btn add-queue\" type=\"button\">add to queue</button>\n        </li>\n    </ul>\n        </div>\n    </div>`;\n      }\n    )\n    .join('');\n  filmModal.innerHTML = markup;\n}\n\n// ------LOCAL STORAGE\n\nfunction locStorage(data) {\n  const moviesWatched =\n    JSON.parse(localStorage.getItem('movies-watched')) || [];\n  const moviesQueue = JSON.parse(localStorage.getItem('movies-queue')) || [];\n  const addWatched = document.querySelector('.add-watched');\n  const addQueue = document.querySelector('.add-queue');\n\n  addWatched.addEventListener('click', onWatchedClick);\n  addQueue.addEventListener('click', onQueueClick);\n\n  // if (moviesWatched.find(item => item.id === data.id)) {\n  //   addWatched.classList.add('js-remove-from');\n  //   addWatched.textContent = 'remove from watched';\n  // }\n\n  // if (moviesQueue.find(item => item.id === data.id)) {\n  //   addQueue.classList.add('js-remove-from');\n  //   addQueue.textContent = 'remove from queue';\n  // }\n\n  function onWatchedClick() {\n    if ( moviesWatched.includes( data.id)){\n      Notiflix.Notify.failure(\n        'The movie has already been added to the list!'\n      );\n      return;\n    } else\n    // else (!moviesWatched.find(item => item.id === data.id)) {\n      {moviesWatched.push(data.id);\n      localStorage.setItem('movies-watched', JSON.stringify(moviesWatched));\n      Notiflix.Notify.success(\n        'The movie added to the list!'\n      );\n      // const res = addWatched.classList.toggle('js-remove-from');\n      // addWatched.textContent = `${res ? 'remove from' : 'add to'} watched `;\n      // return;\n    }\n\n    // const index = moviesWatched.findIndex(object => object.id === data.id);\n\n    // moviesWatched.splice(index, 1);\n    // localStorage.setItem('movies-watched', JSON.stringify(moviesWatched));\n\n    // const res = addWatched.classList.toggle('js-remove-from');\n    // addWatched.textContent = `${res ? 'remove from' : 'add to'} watched `;\n  }\n\n  function onQueueClick() {\n    if ( moviesQueue.includes( data.id)){\n      Notiflix.Notify.failure(\n        'The movie has already been added to the list!'\n      );\n      return;\n    } else\n    // if (!moviesQueue.find(item => item.id === data.id)) {\n      {moviesQueue.push(data.id);\n      localStorage.setItem('movies-queue', JSON.stringify(moviesQueue));\n\n      // const res = addQueue.classList.toggle('js-remove-from');\n      // addQueue.textContent = `${res ? 'remove from' : 'add to'} queue `;\n      // return;\n    }\n\n    // const index = moviesQueue.findIndex(object => object.id === data.id);\n\n    // moviesQueue.splice(index, 1);\n    // localStorage.setItem('movies-queue', JSON.stringify(moviesQueue));\n\n    // const res = addQueue.classList.toggle('js-remove-from');\n    // addQueue.textContent = `${res ? 'remove from' : 'add to'} queue `;\n  }\n}\n"],"names":["$80ad9e7a11e3674b$var$backdrop","document","querySelector","$80ad9e7a11e3674b$var$list","$80ad9e7a11e3674b$var$filmModal","$80ad9e7a11e3674b$var$closeModal","classList","add","innerHTML","body","style","removeEventListener","$80ad9e7a11e3674b$var$onEscKeyPress","evt","code","addEventListener","preventDefault","filmId","fetch","then","resp","ok","Error","statusText","json","$80ad9e7a11e3674b$var$fetchOneMovie","target","closest","dataset","id","data","arr","push","markup","map","title","vote_average","vote_count","popularity","original_title","genres","overview","poster_path","genreList","genre","name","toFixed","Math","ceil","splice","join","$80ad9e7a11e3674b$var$renderModal","remove","moviesWatched","JSON","parse","localStorage","getItem","moviesQueue","addWatched","addQueue","onWatchedClick","includes","Notiflix","Notify","failure","setItem","stringify","success","onQueueClick","$80ad9e7a11e3674b$var$locStorage","$80ad9e7a11e3674b$var$showModal"],"version":3,"file":"index.c9fa9703.js.map"}