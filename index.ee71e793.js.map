{"mappings":"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","sources":["src/JS/renderModalMarkup.js"],"sourcesContent":["function fetchOneMovie(filmId) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${filmId}?api_key=671c14eb1babf71c7ecd9b35ab5716a8`\n  ).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction movieClick(evt) {\n  evt.preventDefault();\n\n  const selectedFilm = evt.target.closest('.js-card');\n  // console.log(selectedFilm);\n  const filmId = selectedFilm.dataset.id;\n  // console.log(filmId);\n\n  fetchOneMovie(filmId).then(data => {\n    // console.log(data);\n    showModal(data);\n  });\n}\n\nconst backdrop = document.querySelector('.js-movie-modal-backdrop');\nconst list = document.querySelector('.js-cards');\nconst filmModal = document.querySelector('.js-movie-modal');\nconst filmModalbackdrop = document.querySelector('.js-movie-modal-backdrop');\n\nfilmModalbackdrop.addEventListener('click', closeModal);\nlist.addEventListener('click', movieClick);\n\nfunction showBackdrop() {\n  backdrop.classList.remove('is-hidden');\n  document.body.style = `overflow-y: hidden`;\n}\n\nfunction closeBackdrop() {\n  backdrop.classList.add('is-hidden');\n  backdrop.innerHTML = '';\n  document.body.style = `overflow-y: visible`;\n}\n\nfunction showModal(data) {\n  renderModal(data);\n  const closeBtn = document.querySelector('.js-movie-modal__close-btn');\n  closeBtn.addEventListener('click', closeModal);\n  filmModal.classList.remove('is-hidden');\n\n  showBackdrop();\n  document.addEventListener('keydown', onEscKeyPress);\n\n  locStorage(data);\n}\n\nfunction closeModal() {\n  filmModal.classList.add('is-hidden');\n\n  closeBackdrop();\n  document.removeEventListener('keydown', onEscKeyPress);\n}\n\nfunction onEscKeyPress(evt) {\n  if (evt.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction renderModal(data) {\n  const arr = [];\n  arr.push(data);\n  const markup = arr\n    .map(\n      ({\n        title,\n        vote_average,\n        vote_count,\n        popularity,\n        original_title,\n        genres,\n        overview,\n        poster_path,\n      }) => {\n        const genreList = genres.map(genre => genre.name);\n\n        return `<div class=\"js-movie-modal__content\">\n        <button class = \"js-movie-modal__close-btn\">\n        <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M8 8L22 22\" stroke=\"black\" stroke-width=\"2\"/>\n            <path d=\"M8 22L22 8\" stroke=\"black\" stroke-width=\"2\"/>\n        </svg>              \n        </button>\n        <div class=\"js-movie-modal__poster\">\n            <img class = \"js-movie-modal__img\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        </div>\n        <div class=\"movie-modal__info-about\">\n            <h1 class=\"js-movie-modal__title\">${title}</h1>\n    <div class=\"movie-modal__info\">\n        <div class=\"movie-modal__info-name\">\n            <p class=\"info-name\">Vote / Votes</p>\n            <p class=\"info-name\">Popularity</p>\n            <p class=\"info-name\">Original Title</p>\n            <p class=\"info-name\">Genre</p>\n        </div>\n        <div class=\"movie-modal__info-value\">\n            <p class=\"js-info-value\">\n                <span class=\"js-info-value__vote\">${vote_average.toFixed(1)}</span>&ensp;/&ensp; \n                <span class=\"js-info-value__votes\">${vote_count}</span>\n            </p>\n            <p class=\"js-info-value\">${Math.ceil(popularity)}</p>\n            <p class=\"js-info-value\">${original_title}</p>\n            <p class=\"js-info-value\">${genreList.splice(0, 3).join(', ')}</p>\n        </div>\n    </div>\n    <h2 class=\"movie-modal__about\">About </h2>\n    <p class=\"js-movie-modal__about-text\">${overview}</p>\n    <ul class = \"movie-modal__btn-list\">\n        <li class = \"movie-modal__btn-list-item\">\n            <button class=\"js-movie-modal__btn add-watched\" type=\"button\">add to Watched</button>\n        </li>\n        <li class = \"movie-modal__btn-list-item\">\n            <button class=\"js-movie-modal__btn add-queue\" type=\"button\">add to queue</button>\n        </li>\n    </ul>\n        </div>\n    </div>`;\n      }\n    )\n    .join('');\n  filmModal.innerHTML = markup;\n}\n\n// ------LOCAL STORAGE\n\nfunction locStorage(data) {\n  const moviesWatched =\n    JSON.parse(localStorage.getItem('movies-watched')) || [];\n  const moviesQueue = JSON.parse(localStorage.getItem('movies-queue')) || [];\n  const addWatched = document.querySelector('.add-watched');\n  const addQueue = document.querySelector('.add-queue');\n\n  addWatched.addEventListener('click', onWatchedClick);\n  addQueue.addEventListener('click', onQueueClick);\n\n  if (moviesWatched.find(item => item.id === data.id)) {\n    addWatched.classList.add('js-remove-from');\n    addWatched.textContent = 'remove from watched';\n  }\n\n  if (moviesQueue.find(item => item.id === data.id)) {\n    addQueue.classList.add('js-remove-from');\n    addQueue.textContent = 'remove from queue';\n  }\n\n  function onWatchedClick() {\n    if (!moviesWatched.find(item => item.id === data.id)) {\n      moviesWatched.push(data.id);\n      localStorage.setItem('movies-watched', JSON.stringify(moviesWatched));\n\n      const res = addWatched.classList.toggle('js-remove-from');\n      addWatched.textContent = `${res ? 'remove from' : 'add to'} watched `;\n      return;\n    }\n\n    const index = moviesWatched.findIndex(object => object.id === data.id);\n\n    moviesWatched.splice(index, 1);\n    localStorage.setItem('movies-watched', JSON.stringify(moviesWatched));\n\n    const res = addWatched.classList.toggle('js-remove-from');\n    addWatched.textContent = `${res ? 'remove from' : 'add to'} watched `;\n  }\n\n  function onQueueClick() {\n    if (!moviesQueue.find(item => item.id === data.id)) {\n      moviesQueue.push(data.id);\n      localStorage.setItem('movies-queue', JSON.stringify(moviesQueue));\n\n      const res = addQueue.classList.toggle('js-remove-from');\n      addQueue.textContent = `${res ? 'remove from' : 'add to'} queue `;\n      return;\n    }\n\n    const index = moviesQueue.findIndex(object => object.id === data.id);\n\n    moviesQueue.splice(index, 1);\n    localStorage.setItem('movies-queue', JSON.stringify(moviesQueue));\n\n    const res = addQueue.classList.toggle('js-remove-from');\n    addQueue.textContent = `${res ? 'remove from' : 'add to'} queue `;\n  }\n}\n"],"names":["$109ef8a2a0c0d812$var$backdrop","document","querySelector","$109ef8a2a0c0d812$var$list","$109ef8a2a0c0d812$var$filmModal","$109ef8a2a0c0d812$var$closeModal","classList","add","innerHTML","body","style","removeEventListener","$109ef8a2a0c0d812$var$onEscKeyPress","evt","code","addEventListener","preventDefault","filmId","fetch","concat","then","resp","ok","Error","statusText","json","$109ef8a2a0c0d812$var$fetchOneMovie","target","closest","dataset","id","data","arr","push","markup","map","param","title","vote_average","vote_count","popularity","original_title","genres","overview","poster_path","genreList","genre","name","toFixed","Math","ceil","splice","join","$109ef8a2a0c0d812$var$renderModal","remove","moviesWatched","JSON","parse","localStorage","getItem","moviesQueue","addWatched","addQueue","onWatchedClick","onQueueClick","find","item","textContent","index","findIndex","object","setItem","stringify","res1","toggle","res","res2","$109ef8a2a0c0d812$var$locStorage","$109ef8a2a0c0d812$var$showModal"],"version":3,"file":"index.ee71e793.js.map"}