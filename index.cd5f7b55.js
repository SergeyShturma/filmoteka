const e={cardsArea:document.querySelector(".js-cards"),onloadMore:document.querySelector(".load-more-btn"),searchForm:document.querySelector(".header__form")};e.onloadMore.style.display="none";let t=1;async function a(){const a=await async function(){const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=671c14eb1babf71c7ecd9b35ab5716a8&language=en-US"),t=await e.json();return await t.genres}();fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=671c14eb1babf71c7ecd9b35ab5716a8&language=ru\n    &page=${t}&include_adult=false`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((e=>console.log(e))).then((e=>e.results)).then((t=>t.map((t=>{const{genre_ids:n,poster_path:s,title:o,vote_average:r,release_date:c,id:i}=t;let l=[];for(const e of a)n.includes(e.id)&&l.push(e.name),l.length>3&&(l=[...l.slice(0,2),"...Other"]);const d=`<li class='js-card' data-id="${i}>\n     <button type="button" class='js-on-card'>\n     <img src="https://image.tmdb.org/t/p/w500/${s}" alt="" class='js-card-img'>\n     </button>\n     <div class='js-movie-descr'>\n     <p class='js-movie-title'>${o.toUpperCase()}</p>\n     <div class='js-movie-genres'>\n     <p>${l} | ${c.slice(0,4)}</p>\n     <span class='js-movie-reiting'>${String(r).slice(0,3)}</span>\n     </div>\n     </div>\n     </li>`;e.cardsArea.insertAdjacentHTML("beforeend",d)})))).catch((e=>console.log(e)))}a(),e.searchForm.addEventListener("submit",(async function(t){if(t.preventDefault(),n=t.currentTarget.elements.searchQuery.value,page=1,e.cardsArea.innerHTML="",console.log(n),!n)return void Notiflix.Notify.failure("Please, enter your request");try{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=671c14eb1babf71c7ecd9b35ab5716a8&language=ru\n\n    &page=1&query=${n}&include_adult=false`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((e=>console.log(e))),{results:a}=t,s=a.map((e=>function(e){const{poster_path:t,title:a,vote_average:n,release_date:s}=e;return`<li class='js-card'>\n    <button type="button" class='js-on-card'>\n    <img src="https://image.tmdb.org/t/p/w500/${t}" alt="" class='js-card-img'>\n    </button>\n    <div class='js-movie-descr'>\n    <p class='js-movie-title'>${a.toUpperCase()}</p>\n    <div class='js-movie-genres'>\n    <p> | ${s.slice(0,4)}</p>\n    <span class='js-movie-reiting'>${String(n).slice(0,3)}</span>\n    </div>\n    </div>\n    </li>`}(e))).join("");e.cardsArea.innerHTML=s}catch(e){console.log(e)}}));let n="";fetch("https://api.themoviedb.org/3/movie/619930?api_key=671c14eb1babf71c7ecd9b35ab5716a8").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((e=>console.log(e))).then((e=>e)).catch((e=>console.log(e))),fetch("https://api.themoviedb.org/3/movie/619930/videos?api_key=671c14eb1babf71c7ecd9b35ab5716a8").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((e=>console.log(e))).then((e=>e)).catch((e=>console.log(e))),e.onloadMore.addEventListener("click",(function(){t+=1,a()})),setTimeout((()=>{e.onloadMore.style.display="block"}),2e3);
//# sourceMappingURL=index.cd5f7b55.js.map
