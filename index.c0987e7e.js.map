{"mappings":"AAAA,MAKMA,EAAO,CACTC,UAAWC,SAASC,cAAc,eAuBtCC,iBACA,MAAMC,QATND,iBACE,MAAME,QAAiBC,MAAM,yGACvBC,QAAaF,EAASG,OAE5B,aADuBD,EAAKH,M,CAMTK,GAlBVH,MAAM,4FACRI,MAAKC,IACF,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YACvB,OAAOH,EAAKH,MAAM,IAEvBO,OAAMC,GAAOC,QAAQC,IAAIF,KAc7BN,MAAKH,GAAQA,EAAKY,UAClBT,MAAKU,GAASA,EAAMC,KAAIC,IACzB,MAAMC,UAAEA,EAASC,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,aAAEA,GAAiBL,EACtE,IAAIM,EAAc,GAClB,IAAK,MAAMC,KAASzB,EAChBmB,EAAUO,SAASD,EAAME,KACrBH,EAAYI,KAAKH,EAAMI,MAE3BL,EAAYM,OAAS,IACrBN,EAAc,IAAIA,EAAYO,MAAM,EAAG,GAAI,aAI3C,MAAMC,EAAa,wHAEKZ,qHAGCC,EAAMY,kEAE7BT,OAAiBD,EAAaQ,MAAM,EAAG,+CACXG,OAAOZ,GAAcS,MAAM,EAAG,kDAKhEpC,EAAKC,UAAUuC,mBAAmB,YAAaH,EAAW,MAEzDrB,OAAMC,GAAOC,QAAQC,IAAIF,I,CAnD9BwB,GAoEWlC,MAAM,sFACZI,MAAKC,IACE,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YACvB,OAAOH,EAAKH,MAAM,IAE3BO,OAAMC,GAAOC,QAAQC,IAAIF,KAIzBN,MAAKH,GAAQA,IACbQ,OAAMC,GAAOC,QAAQC,IAAIF,KAGnBV,MAAM,6FACRI,MAAKC,IACF,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YACvB,OAAOH,EAAKH,MAAM,IAEvBO,OAAMC,GAAOC,QAAQC,IAAIF,KAI7BN,MAAKH,GAAQA,IACbQ,OAAMC,GAAOC,QAAQC,IAAIF","sources":["src/JS/api.js"],"sourcesContent":["const API_KEY = '671c14eb1babf71c7ecd9b35ab5716a8';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst IMG_BASE_URL = 'https://image.tmdb.org/t/p/w500/';\nconst MOVIE_ID = '619930';\n\nconst refs = {\n    cardsArea: document.querySelector('.js-cards')\n};\n\nrenderTrendCardMarkup()\n\nfunction getTrendingMovies() {\n    return fetch(`${BASE_URL}/trending/movie/day?api_key=${API_KEY}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            } return resp.json()\n        })\n        .catch(err => console.log(err));\n};\n\nasync function getGenreNames() {\n  const response = await fetch(`${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=en-US`);\n  const data = await response.json();\n  const genNames = await data.genres\n  return genNames\n \n}\n\nasync function  renderTrendCardMarkup() {\nconst genres = await getGenreNames()\ngetTrendingMovies()\n    .then(data => data.results)\n    .then(cards => cards.map(card => { \n    const { genre_ids, poster_path, title, vote_average, release_date } = card;\n    let movieGenres = []; \n    for (const genre of genres) {\n    if (genre_ids.includes(genre.id)) {\n            movieGenres.push(genre.name)\n        }\n    if (movieGenres.length > 3) {\n        movieGenres = [...movieGenres.slice(0, 2), '...Other'];\n        }\n        }   \n          \n        const cardMarkup = `<li class='js-card'>\n     <button type=\"button\" class='js-on-card'>\n     <img src=\"${IMG_BASE_URL}${poster_path}\" alt=\"\" class='js-card-img'>\n     </button>\n     <div class='js-movie-descr'>\n     <p class='js-movie-title'>${title.toUpperCase()}</p>\n     <div class='js-movie-genres'>\n     <p>${movieGenres} | ${release_date.slice(0, 4)}</p>\n     <span class='js-movie-reiting'>${String(vote_average).slice(0, 3)}</span>\n     </div>\n     </div>\n     </li>`\n    \n    refs.cardsArea.insertAdjacentHTML('beforeend', cardMarkup)\n    }))\n    .catch(err => console.log(err));   \n}\n\nfunction getSearchMovies() {\n    return fetch(`${BASE_URL}/search/movie?api_key=${API_KEY}&language=ru\n    &page=1&include_adult=false`)\n    .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            } return resp.json()\n        })\n    .catch (err => console.log(err));\n}\n\n\n\nfunction getMovieDetails() {\n    return fetch(`${BASE_URL}/movie/${MOVIE_ID}?api_key=${API_KEY}`)\n    .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            } return resp.json()\n    })\n    .catch(err => console.log(err));\n};\n\ngetMovieDetails()\n    .then(data => data)\n    .catch(err => console.log(err));\n\nfunction getMovieVideos() {\n    return fetch(`${BASE_URL}/movie/619930/videos?api_key=${API_KEY}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            } return resp.json()\n        })\n        .catch(err => console.log(err));\n}\n\ngetMovieVideos()\n    .then(data => data)\n    .catch(err => console.log(err));"],"names":["$d637584d1bf81fd1$var$refs","cardsArea","document","querySelector","async","genres","response","fetch","data","json","$d637584d1bf81fd1$var$getGenreNames","then","resp","ok","Error","statusText","catch","err","console","log","results","cards","map","card","genre_ids","poster_path","title","vote_average","release_date","movieGenres","genre","includes","id","push","name","length","slice","cardMarkup","toUpperCase","String","insertAdjacentHTML","$d637584d1bf81fd1$var$renderTrendCardMarkup"],"version":3,"file":"index.c0987e7e.js.map"}