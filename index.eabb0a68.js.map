{"mappings":"YAAA,IAAMA,EAAO,CACPC,MAAOC,SAASC,cAAc,cAC/BC,cAAeF,SAASC,cAAc,sBACrCE,SAAUH,SAASC,cAAc,gBACnCG,WAAYJ,SAASC,cAAc,oBACnCI,KAAML,SAASC,cAAc,cA0CjC,SAASK,IACLN,SAASO,oBAAoB,UAAWC,GACxCR,SAASS,KAAKC,UAAUC,OAAO,a,CASnC,SAASH,EAAcI,GACF,WAAbA,EAAIC,MACJP,G,CApDRR,EAAKI,cAAcY,iBAAiB,QAASR,GAC7CR,EAAKK,SAASW,iBAAiB,SA2C/B,SAAyBF,GACjBA,EAAIG,gBAAkBH,EAAII,QAC1BV,G,IA3CRR,EAAKO,KAAKS,iBAAiB,SAG3B,SAAoBF,GAChBA,EAAIK,iBAEL,IAAMC,EAAeN,EAAII,OAAOG,QAAQ,YACjCC,EAASF,EAAaG,QAAQC,GAEhCJ,IAsBJlB,SAASc,iBAAiB,UAAWN,GACrCR,SAASS,KAAKC,UAAUa,IAAI,cAbhC,SAAuBH,GACnB,OAAOI,MAAM,sCAA6CC,OAAPL,EAAO,8CACrDM,MAAK,SAAAC,GACD,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YAE1B,OAAOH,EAAKI,M,IAdhBC,CAAcZ,GACTM,MAAK,SAAAO,IA0ClB,SAA0BA,GACtB,IAAMC,EAAM,GACZA,EAAIC,KAAKF,GACT,IAAMG,EAASF,EAAIG,KAAI,SAAAC,G,IAAGC,EAAKD,EAALC,MAAOC,EAAYF,EAAZE,aAAcC,EAAUH,EAAVG,WAAYC,EAAUJ,EAAVI,WAAYC,EAAcL,EAAdK,eAAgBC,EAAMN,EAANM,OAAQC,EAAQP,EAARO,SAAUC,EAAWR,EAAXQ,YAC/FC,EAAYH,EAAOP,KAAI,SAAAW,G,OAASA,EAAMC,I,IAE/C,MAAO,4CAE6CxB,OAFDqB,EAAY,mKAcKrB,OAZhBc,EAAM,qlBAYiCd,OAAvBe,EAAa,YACnCf,OAD6CgB,EAAW,2DAExDhB,OADAiB,EAAW,2DAEXjB,OADAkB,EAAe,2DASZlB,OARHsB,EAAUG,MAAM,EAAE,GAAG,iNAQTzB,OAAToB,EAAS,iC,IACrCM,KAAK,IAC3BrD,EAAKC,MAAMqD,UAAYhB,C,CA1EXiB,CAAiBpB,E","sources":["src/JS/renderModalMarkup.js"],"sourcesContent":["const refs = {\n      addTo: document.querySelector(\".modal_txt\"),\n     closeModalBtn: document.querySelector('[data-modal-close]'),\n      backdrop: document.querySelector('.js-backdrop'),\n    watchedBtn: document.querySelector(\".button_card_add\"), \n    list: document.querySelector('.js-cards'),\n}\n\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick); \n// refs.watchedBtn.addEventListener(\"click\", addToLocalStorage)\nrefs.list.addEventListener('click', movieClick)\n\n\nfunction movieClick(evt) {\n    evt.preventDefault();\n\n   const selectedFilm = evt.target.closest('.js-card');\n    const filmId = selectedFilm.dataset.id;\n    \n    if (selectedFilm) {\n        onOpenModal();\n        fetchOneMovie(filmId)\n            .then(data => {\n                createMarkupCard(data)             \n            })\n    }\n}\n\n\nfunction fetchOneMovie(filmId) {\n    return fetch(`https://api.themoviedb.org/3/movie/${filmId}?api_key=671c14eb1babf71c7ecd9b35ab5716a8`)\n        .then(resp => {\n             if (!resp.ok) {\n                 throw new Error(resp.statusText);\n             }\n            return resp.json()\n        })\n  \n}\n\nfunction onOpenModal() {\n    document.addEventListener('keydown', onEscapeClick)\n    document.body.classList.add('show-modal');\n    // createMarkupCard();\n}\n\nfunction onCloseModal() {\n    document.removeEventListener('keydown', onEscapeClick)\n    document.body.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(evt) {\n    if (evt.currentTarget === evt.target) {\n        onCloseModal();\n    }\n}\n\nfunction onEscapeClick(evt) {\n    if (evt.code === 'Escape') {\n        onCloseModal();\n    }\n}\n\n\nfunction createMarkupCard(data) {\n    const arr = [];\n    arr.push(data);\n    const markup = arr.map(({ title, vote_average, vote_count, popularity, original_title, genres, overview, poster_path }) => {\n        const genreList = genres.map(genre => genre.name);\n\n     return `<img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"phonesize_image_movie\" class=\"image_movie_card\">\n                <div class=\"movie_card_info\">\n                    <h1 class=\"movie_title_card_modal\">${title}</h1>\n                    <div class=\"rates_info_card_movie\">\n\n        <div class=\"rates_info_card_movie_titles\">\n            <p class=\"rates_info_card_movie_titles_name\">Vote / Votes</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Popularity</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Original Title</p> \n                    <p class=\"rates_info_card_movie_titles_name\">Genre</p> \n\n        </div>\n                    \n<div class=\"rates_info_card_movie_datas\">\n    <p class=\"votes_number_card\"> <span class=\"span_votes_number_card\">${vote_average}</span>/${vote_count}</p>\n                    <p class=\"votes_number_card\">${popularity}</p>\n                    <p class=\"votes_number_card\">${original_title}</p>\n                    <p class=\"votes_number_card\">${genreList.slice(0,3)}</p>\n</div>\n                    \n\n                    </div>\n                  \n                    <h2 class=\"about-film-card-info\">About</h2>\n\n                 <p class=\"description-movie-card\"> ${overview}</p>  \n                </div>`}).join('');\n    refs.addTo.innerHTML = markup;\n}\n\n\n"],"names":["$109ef8a2a0c0d812$var$refs","addTo","document","querySelector","closeModalBtn","backdrop","watchedBtn","list","$109ef8a2a0c0d812$var$onCloseModal","removeEventListener","$109ef8a2a0c0d812$var$onEscapeClick","body","classList","remove","evt","code","addEventListener","currentTarget","target","preventDefault","selectedFilm","closest","filmId","dataset","id","add","fetch","concat","then","resp","ok","Error","statusText","json","$109ef8a2a0c0d812$var$fetchOneMovie","data","arr","push","markup","map","param","title","vote_average","vote_count","popularity","original_title","genres","overview","poster_path","genreList","genre","name","slice","join","innerHTML","$109ef8a2a0c0d812$var$createMarkupCard"],"version":3,"file":"index.eabb0a68.js.map"}